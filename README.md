# Telegram Bot

Этот проект представляет собой Telegram-бота, который позволяет пользователям подписываться на уведомления об утечках данных и получать уведомления через Telegram.

## Зависимости

Перед запуском убедитесь, что у вас установлены следующие зависимости:

- Python 3.8 или выше
- Установленные библиотеки из `requirements.txt`:
  ```bash
  pip install -r requirements.txt
  ```

## Настройка

1. Создайте файл `.env` в корне проекта и добавьте в него токен вашего Telegram-бота:
   ```
   TELEGRAM_BOT_TOKEN=ваш_токен
   ```

## Формат JSON-файлов

Если вы используете JSON-файлы для тестирования или миграции данных, они должны быть в следующем формате:

### `users.json`
Содержит список пользователей, подписанных на уведомления:
```json
{
  "user@example.com": 123456789,
  "another_user@example.com": 987654321
}
```
- Ключ: email пользователя.
- Значение: `chat_id` пользователя в Telegram.

### `leaks.json`
Содержит список утечек данных:
```json
[
  {
    "email": "user@example.com",
    "source": "example.com",
    "leak_info": "Пароль был скомпрометирован",
    "notified": false
  },
  {
    "email": "another_user@example.com",
    "source": "another.com",
    "leak_info": "Утечка данных кредитной карты",
    "notified": true
  }
]
```
- `email`: Email, связанный с утечкой.
- `source`: Источник утечки.
- `leak_info`: Дополнительная информация об утечке.
- `notified`: Флаг, указывающий, было ли отправлено уведомление (`true` или `false`).

## Запуск

1. Запустите приложение с помощью `uvicorn`:
   ```bash
   uvicorn main:app --reload
   ```

## Описание работы

- **Telegram Bot**:
  - Пользователь отправляет команду `/start`, чтобы начать взаимодействие.
  - Пользователь отправляет свой email для подписки.
  - Email и `chat_id` сохраняются в базе данных.

- **Notifier**:
  - Проверяет файл `leaks.json` или базу данных на наличие новых утечек.
  - Отправляет уведомления пользователям, если их email присутствует в утечке.